<div style="margin: 62 auto 32;" class="mat-elevation-z8">
    <form [formGroup]="consultaForm" (submit)="consultaBeneficiario()">
        <div [formGroup]="consultaForm">
            <div class="form-group row col-lg-2 ml-1 mt-3">
                <label>CPF ou NIS do beneficiário</label>
                <input matInput maxlength="14" mask="000.000.000-00" [formControl]="cpfOuNis" (keyup)="ativarNovaConsulta()" type="text">
                <small class="form-text text-danger" *ngIf="cpfOuNis.invalid">{{getErrorMessage()}}</small>
            </div>
            <div class="form-group row ml-1 mt-1">
                <div class=col-lg-2>
                    <label>Mês de referência</label>
                    <input type="text" [formControl]="mesReferencia" mask="00/0000">
                </div>

                <div style="align-self: center;">
                    <button mat-icon-button type="submit" aria-label="Consulta Benefícios"
                        [disabled]="consultaForm.invalid || emConsulta">
                        <mat-icon [inline]="true" style="font-size: xx-large;">search</mat-icon>
                    </button>
                </div>
            </div>
        </div>
    </form>

    <div *ngIf=consultaBFDisponivel>
        <mat-card>
            <mat-card-title>Benefícios</mat-card-title>
            <mat-card-content>
                <table>
                    <tr>
                        <td> Nome </td>
                        <td> {{dataBF.nome}} </td>
                    </tr>
                    <tr>
                        <td> NIS </td>
                        <td> {{dataBF.nis}} </td>
                    </tr>
                    <tr>
                        <td> Dependentes </td>
                        <td style="padding-left: 2em;"> {{dataBF.quantidadeDependentes}} </td>
                    </tr>
                    <tr>
                        <td> Município </td>
                        <td> {{dataBF.municipio}} </td>
                    </tr>
                    <tr *ngIf=consultaDFDisponivel>
                        <td> Bolsa Família </td>
                        <td> {{dataBF.valorBolsaFamilia | currency: 'R$ '}} </td>
                    </tr>
                    <tr *ngIf=consultaDFDisponivel>
                        <td> DF sem miśeria </td>
                        <td> {{dataBF.valorDfSemMiseria | currency: 'R$ '}} </td>
                    </tr>
                    <tr *ngIf=consultaDFDisponivel>
                        <td> Bolsa Social </td>
                        <td> {{dataBF.valorBolsaSocial | currency: 'R$ '}} </td>
                    </tr>
                    <tr *ngIf=consultaDFDisponivel>
                        <td> Outros </td>
                        <td> {{dataBF.valorOutros | currency: 'R$ '}} </td>
                    </tr>
                    <tr *ngIf=consultaDFDisponivel>
                        <td><strong> Total </strong></td>
                        <td><strong>{{dataBF.valorTotal | currency: 'R$ ' }} </strong></td>
                    </tr>
                </table>
            </mat-card-content>
            <div>
                <p>Auxílio Emergencial</p>
                <div class="row">
                    <span class="col-lg-1">Mês </span>
                    <span class="col-lg-2">Valor recebido </span>
                </div>
                <div *ngFor="let auxilio of auxilios">
                    <div class="row">
                        <span class="col-lg-1">{{auxilio?.mesDisponibilizacao}} </span>
                        <span class="col-lg-2">{{auxilio?.valor | currency:'BRL' }} </span>
                    </div>
                </div>
            </div>
        </mat-card>

    </div>

    <div *ngIf="!consultaBFDisponivel && !emConsulta">
        <h5>Consulta não realizada ou dados não disponíveis</h5>
    </div>
    <div *ngIf="waitingGovBr">
        <div class="spinner-border" role="status">
            <span class="sr-only">Buscando dados em gov.br ...</span>
        </div>
        <span class="ml-3">Buscando dados em gov.br ...</span>
    </div>
    <div *ngIf="waitingGovDf">
        <div class="spinner-border" role="status">
            <span class="sr-only">Buscando dados em gov.df ...</span>
        </div>
        <span class="ml-3">Buscando dados em gov.df ...</span>
    </div>
</div>